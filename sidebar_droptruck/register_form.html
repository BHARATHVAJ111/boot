<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
         .input .error {
            color: red;
            font-size: 16px;
            margin-top: 5px;
        }

        .input.success input {
            border-color: green;
        }

        .input.error input {
            border-color: red;
        }
    </style>
</head>

<body>
    <div class="container mt-5 bg-light w-50 p-5 mt-5 mb-5">
        <h2 class="text-center mb-4">Register</h2>
        <form id="registerForm" class="needs-validation">
            <div class="mb-3 input">
                <label for="name" class="form-label">User Name</label>
                <input type="text" class="form-control" id="name" name="name">
                <div class="error"></div>
            </div>

            <div class="mb-3 input">
                <label for="email" class="form-label">Email Address</label>
                <input type="text" class="form-control" id="email" name="email">
                <div class="error"></div>
            </div>

            <div class="mb-3 input">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" name="password">
                <div class="error"></div>
            </div>

            <div class="mb-3 input">
                <label for="confirmPassword" class="form-label">Confirm Password</label>
                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword">
                <div class="error"></div>
            </div>

            <button type="submit" class="btn btn-primary">Register</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const Form=document.querySelector('#registerForm');
        const Username=document.querySelector('#name');
        const email=document.querySelector('#email');
        const password=document.querySelector('#password');
        const Confirmpassword=document.querySelector('#confirmPassword');

        Form.addEventListener('submit',(e)=>{
            
            e.preventDefault();
            validateInputs();
        });

        function validateInputs(){
            const UsernameVal=Username.value.trim();
            const EmailVal=email.value.trim();
            const PasswordVal=password.value.trim();
            const ConfirmpasswordVal=Confirmpassword.value.trim();

            if (UsernameVal === "") {
    setError(Username, 'User name is required');
} else {
    setSuccess(Username);
}

if (EmailVal === "") {
    setError(email, 'Email is required');
} else if (!validateEmail(EmailVal)) {
    setError(email, 'Email is not valid');
} else {
    setSuccess(email);
}

if (PasswordVal === "") {
    setError(password, 'Password is required');
} else if (PasswordVal.length < 8) {
    setError(password, 'Password must have at least 8 characters');
} else {
    setSuccess(password);
}

if (ConfirmpasswordVal === "") {
    setError(Confirmpassword, 'Confirm password is required');
} else if (ConfirmpasswordVal !== PasswordVal) {  // Fixed comparison operator
    setError(Confirmpassword, 'Confirm password does not match');
} else {
    setSuccess(Confirmpassword);
}

        }

        // function setError(element,message){

        //     const parentElement=element.parentElement;

        //     const errorElement=parentElement.querySelector('.error');
        //     errorElement.innerText = message;
        //     errorElement.classList.add('error');
        //     errorElement.classList.remove('success');

        // }
        // function setSuccess(element){

        //     const parentElement=element.parentElement;

        //     const errorElement=parentElement.querySelector('.error');
        //     errorElement.innerText = '';
        //     errorElement.classList.add('success');
        //     errorElement.classList.remove('error');

        // } 
        function setError(element, message) {
            const parentElement = element.parentElement;
            const errorElement = parentElement.querySelector('.error');
            
            // Display the error message and apply error class
            errorElement.innerText = message;
            parentElement.classList.add('error');
            parentElement.classList.remove('success');
        }

        function setSuccess(element) {
            const parentElement = element.parentElement;
            const errorElement = parentElement.querySelector('.error');
            
            // Clear the error message and apply success class
            errorElement.innerText = '';
            parentElement.classList.add('success');
            parentElement.classList.remove('error');
        }

       
        const validateEmail = (EmailVal) => {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(EmailVal).toLowerCase());
};



    </script>
</body>

</html>